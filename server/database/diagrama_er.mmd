erDiagram
    USUARIOS {
        bigint id PK
        string nombre
        string correo UK
        timestamp correo_verificado_en
        string contrasenya
        string remember_token
        timestamp created_at
        timestamp updated_at
    }

    CAMPEONES {
        bigint id PK
        string id_campeon UK
        string nombre
        string titulo
        text historia
        json etiquetas
        json estadisticas
        json habilidades
        json recomendados
        string url_imagen
        timestamp created_at
        timestamp updated_at
    }

    OBJETOS {
        bigint id PK
        string id_objeto UK
        string nombre
        text descripcion
        text texto_plano
        json etiquetas
        json estadisticas
        int oro_total
        int oro_base
        int oro_venta
        boolean comprable
        json mapas
        string url_imagen
        timestamp created_at
        timestamp updated_at
    }

    BUILDS {
        bigint id PK
        bigint id_usuario FK
        string id_campeon
        string nombre
        json objetos
        text descripcion
        boolean es_publica
        timestamp created_at
        timestamp updated_at
    }

    CAMPEONES_FAVORITOS {
        bigint id PK
        bigint id_usuario FK
        string id_campeon
        timestamp created_at
        timestamp updated_at
    }

    TOKENS_ACCESO_PERSONAL {
        bigint id PK
        string tokenable_type
        bigint tokenable_id
        string nombre
        string token UK
        text habilidades
        timestamp ultimo_uso_en
        timestamp expira_en
        timestamp created_at
        timestamp updated_at
    }

    SESIONES {
        string id PK
        bigint id_usuario FK
        string direccion_ip
        text agente_usuario
        longtext datos
        int ultima_actividad
    }

    TOKENS_RESETEO_CONTRASENYA {
        string correo PK
        string token
        timestamp creado_en
    }

    CACHE {
        string clave PK
        mediumtext valor
        int expiracion
    }

    BLOQUEOS_CACHE {
        string clave PK
        string propietario
        int expiracion
    }

    TRABAJOS {
        bigint id PK
        string cola
        longtext datos
        tinyint intentos
        int reservado_en
        int disponible_en
        int creado_en
    }

    LOTES_TRABAJOS {
        string id PK
        string nombre
        int total_trabajos
        int trabajos_pendientes
        int trabajos_fallidos
        longtext ids_trabajos_fallidos
        mediumtext opciones
        int cancelado_en
        int creado_en
        int finalizado_en
    }

    TRABAJOS_FALLIDOS {
        bigint id PK
        string uuid UK
        text conexion
        text cola
        longtext datos
        longtext excepcion
        timestamp fallido_en
    }

    %% Relaciones
    USUARIOS ||--o{ BUILDS : "tiene"
    USUARIOS ||--o{ CAMPEONES_FAVORITOS : "tiene"
    USUARIOS ||--o{ SESIONES : "tiene"
    USUARIOS ||--o{ TOKENS_ACCESO_PERSONAL : "tiene (polymorphic)"

